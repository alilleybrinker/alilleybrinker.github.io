{% import "macros/toc.html" as toc %}
{% import "macros/post-preview.html" as post %}
{% import "macros/post-list.html" as list %}

{% if page and page.title %}
    {% set title = page.title ~ " — " ~ config.title %}
    {% set original_title = page.title %}
{% elif section and section.title %}
    {% set title = section.title ~ " — " ~ config.title %}
    {% set original_title = section.title %}
{% else %}
    {% set title = config.title %}
{% endif %}

{% if page and page.description %}
    {% set description = page.description %}
{% elif section and section.description %}
    {% set description = section.description %}
{% else %}
    {% set description = config.description %}
{% endif %}

{% if page and page.summary %}
    {% set social_description = page.summary | striptags %}
{% else %}
    {% set social_description = description %}
{% endif %}

<!doctype html>
<html lang="en-US" class="">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{{ title }}</title>

		<meta name="title" content="{{ title }}">
		<meta name="description" content="{{ social_description }}">

		<meta property="og:type" content="website">
		<meta property="og:url" content="{{ config.base_url }}">
		<meta property="og:title" content="{{ title }}">
		<meta property="og:description" content="{{ social_description }}">
		<meta property="og:image" content="{{ get_url(path="social.png") }}">

		<meta property="twitter:card" content="summary_large_image">
		<meta property="twitter:url" content="{{ config.base_url }}">
		<meta property="twitter:title" content="{{ title }}">
		<meta property="twitter:description" content="{{ social_description }}">
		<meta property="twitter:image" content="{{ get_url(path="social.png") }}">

		{% block rss %}
		  <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ get_url(path="rss.xml", trailing_slash=false) }}">
		{% endblock %}

		<!-- HTML in your document's head -->
        <link rel="preconnect" href="https://rsms.me/">
        <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

		<link rel="stylesheet" href="{{ get_url(path="main.css") }}">
		<script type="text/javascript" src="{{ get_url(path = 'js/header.mjs') }}"></script>

		{% block scripts %}{% endblock %}
	</head>
	<body class="bg-stone-50 dark:bg-neutral-900">
	    <div class="subpixel-antialiased">
			<div class="py-8 mb-8 md:py-20 text-black dark:text-neutral-100 text-base md:text-xl px-5 md:px-0">
			    <nav class="md:max-w-(--breakpoint-md) md:mx-auto">
					<ul class="md:flex gap-6 md:gap-8 max-5-[65ch]">
	                    <li class="block md:inline mb-4 md:mb-0">
							<a href="{{ get_url(path='@/_index.md') }}"
							   class="
									whitespace-nowrap
									relative
									hover:underline
									md:before:absolute
									md:before:-left-8
									before:mr-2
									md:before-mr-0
									before:top-1
									before:rounded-xs
									before:rotate-6
									before:h-4
									before:w-4
									before:inline-block
									before:bg-blue-500
								">
								<span class='h-card'><span class='p-given-name'>Andrew</span> <span class='p-family-name'>Lilley Brinker</span></span>
							</a>
						</li>
						<li class="inline">
						    <ul class="inline-flex md:flex gap-8">
                  		        {% for entry in config.extra.nav %}
                 			        <li><a href="{{ get_url(path=entry.url) }}" class="font-light hover:underline">{{ entry.name | safe }}</a></li>
                 			    {% endfor %}
							</ul>
						</li>
						<li class="inline float-right md:grow">
						    {% include "includes/theme-switcher.html" %}
						</li>
					</ul>
				</nav>
			</div>

			<div class="px-5 md:px-0 md:max-w-(--breakpoint-md) md:mx-auto">
    			<div class="mb-32">
           	        <div class="
                        mb-10
       					prose
                        prose-base md:prose-base prose-stone dark:prose-invert
                        prose-headings:font-normal
       					prose-a:text-black dark:prose-a:text-white
       					prose-a:font-normal
       					prose-a:decoration-1 prose-a:hover:decoration-2
       					prose-a:underline-offset-2 prose-a:hover:underline-offset-auto
       					prose-a:decoration-stone-400 prose-a:hover:decoration-stone-800
                        dark:prose-a:decoration-stone-500 dark:prose-a:hover:decoration-stone-300
       					prose-code:after:content-none prose-code:before:content-none
                        prose-blockquote:font-normal prose-blockquote:not-italic
                        prose-blockquote:text-base
                        prose-figure:bg-blue-50 prose-figure:p-4
                        dark:prose-figure:bg-neutral-600
                        prose-figure:border prose-figure:border-blue-100
                        dark:prose-figure:border-neutral-500
                        prose-figure:rounded-md
                        prose-blockquote:border-l-blue-200
                        dark:prose-blockquote:border-l-blue-500
                        prose-blockquote:text-black
                        dark:prose-blockquote:text-white
                        prose-figcaption:text-blue-950 prose-figcaption:opacity-70
                        dark:prose-figcaption:text-blue-50
                        prose-code:font-normal
                        text-pretty
                        max-w-full
       					">
             			{% block header %}
                             {% if original_title %}
                                 <h1 class="block mb-5 text-3xl md:text-4xl">
                                    <span class="leading-snug block mb-4">
                                        {{ original_title | regex_replace(pattern=`"(?P<title>.+)"`, rep=`“$title”`) }}
                                    </span>

                                     <div class="flex flex-wrap items-center gap-2 content-center text-sm md:text-base text-neutral-500">
                                        {% if page and page.date %}
                                            <span class="">{{ page.date | date(format="%B %d, %Y") }}</span>
                                        {% endif %}
                                        {% if page and page.taxonomies['topics'] %}
                                            <span class="font-black text-neutral-400 dark:text-neutral-600">&middot;</span>
                                            <span class="">
                                                Read in <span class="whitespace-nowrap">{{ page.reading_time }} minutes</span>
                                            </span>
                                            <span class="font-black text-neutral-400 dark:text-neutral-600">&middot;</span>
                                            <span class="">
                                                Topics:
                                                {% for topic in page.taxonomies['topics'] %}
                                                    <a class="!text-neutral-500" href="{{ get_taxonomy_url(kind="topics", name=topic) }}">{{ topic }}</a>
                                                {% endfor %}
                                            </span>
                                        {% endif %}
                                     </div>
                                 </h1>
                             {% endif %}
                         {% endblock %}

        				{% block content %}{% endblock %}
         			</div>


                    <div class="mt-14 text-xs text-neutral-400">
                        <p>Copyright Andrew Lilley Brinker. Made with ❤ in California</p>
                    </div>
    			</div>
			</div>
		</div>

		<script type="text/javascript" src="{{ get_url(path = 'js/footer.mjs') }}"></script>
	</body>
</html>
